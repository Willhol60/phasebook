<div class='container'>
  <h1>My Reads</h1>

  Top categories:
  <% current_user.top_categories.each do |key, value| %>
    <%= "#{key}- #{pluralize(value, 'book')} read "%>
    <br>
  <% end %>
  <%= form_tag search_books_path, method: :get do |form| %>
    <%= text_field_tag :query,
      params[:query],
      class: "form-control",
      placeholder: "Find a book by title, ISBN, author, or category"
    %>
    <%= submit_tag "Search", class: "btn btn-primary mb-2 mt-2" %>
  <% end %>
  <%= link_to "Random!", random_books_path, class: 'btn btn-success mb-2' %>

  <div class="d-flex flex-wrap justify-content-center">
    <% current_user.readings.reverse.each do |reading| %>
    <%# CARD: %>

      <div data-controller="library-card" class="m-3">
        <div data-action="mouseenter->library-card#changeCard mouseleave->library-card#changeCardBack">
        <%# <img src= <%= reading.book.poster_url %>
          <div data-library-card-target="cover">
            <%= image_tag reading.book.poster_url, style:"width: 280px; height: 400px; object-fit: contain" %>
          </div>
          <div class="d-none" data-library-card-target="info" style="width: 300px; height: 420px" >
            <div class="book-info-card" style="background-image: linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url('<%=reading.book.poster_url%>'); background-size: cover ">
              <div class="d-flex flex-column">
                <div class="d-flex justify-content-end p-2">
                  <%= link_to book_path(reading.book), method: :delete, remote: true do %>
                    <i class="fa fa-trash" aria-hidden="true" style="color:white"></i>
                  <% end %>
                </div>
                <div id="card-info">
                  <h3><%= reading.book.title %></h3>
                  <p><%= reading.book.author %></p>
                  <p>Rated: <%= reading.user_rating %></p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    <% end %>
  </div>
  <%# <% if reading.end_date && reading.start_date %>
    <%# <p>days to read:<%= (reading.end_date - reading.start_date).to_i %>
  <%# <% end %>
</div>
